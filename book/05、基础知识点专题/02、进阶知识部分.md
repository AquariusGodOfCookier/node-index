## 进阶知识部分

### <div id="class02-01">01、渲染机制</div>

什么是DOCTYPE以及作用、浏览器渲染过程、重排Reflow、重绘Repaint、布局Layout

#### DOCTYPE:
DTD文档类型定义：是一些列的语法规则，用来定义XML或者(X)HTML的文档类型。浏览器会使用它来判断文档类型，决定使用何种协议来解析，以及切换浏览器的模式。                    
DOCTYPE是申明文档类型和DTD规范的，一个主要的用途就是文件的合法性验证。如果文档代码不合法，那么浏览器解析时候会出一些差错的。告诉浏览器下面是什么文档类型                       
html5:<!DOCTYPE html>               
html4：严格模式-包含所有html元素和属性，不包含展示型的和弃用的元素(比如font)                  
宽松模式-XXXXXXXXXXXXXXXXX,包含展示型的和弃用的元素                 

#### 浏览器渲染过程
Firefox、Chrome和Safari是基于两种渲染引擎构建的，**Firefox使用Geoko——Mozilla自主研发的渲染引擎，Safari和Chrome都使用webkit。**

![02_01](./img/02_01.png)

**几个基本概念：**                     
**DOM Tree**：浏览器将HTML解析成树形的数据结构。                
**CSS Rule Tree**：浏览器将CSS解析成树形的数据结构。                    
**Render Tree**: DOM和CSSOM合并后生成Render Tree。                     
**layout**: 有了Render Tree，浏览器已经能知道网页中有哪些节点、各个节点的CSS定义以及他们的从属关系，从而去计算出每个节点在屏幕中的位置。                           
**painting**: 按照算出来的规则，通过显卡，把内容画到屏幕上。                       
**reflow（回流/重排）**：当浏览器发现某个部分发生了点变化影响了布局，需要倒回去重新渲染，内行称这个回退的过程叫 reflow。
reflow 会从 `<html>` 这个root frame开始递归往下，依次计算所有的结点几何尺寸和位置。reflow 几乎是无法避免的。
现在界面上流行的一些效果，比如树状目录的折叠、展开（实质上是元素的显 示与隐藏）等，
都将引起浏览器的 reflow。鼠标滑过、点击……只要这些行为引起了页面上某些元素的占位面积、定位方式、边距等属性的变化，
都会引起它内部、周围甚至整个页面的重新渲 染。通常我们都无法预估浏览器到底会 reflow 哪一部分的代码，它们都彼此相互影响着。
**repaint（重绘）**：改变某个元素的背景色、文字颜色、边框颜色等等不影响它周围或内部布局的属性时，屏幕的一部分要重画，但是元素的几何尺寸没有变。
